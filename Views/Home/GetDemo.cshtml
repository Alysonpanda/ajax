
@{
    ViewData["Title"] = "Ajax";
}

<h1>Get Demo Ajax</h1>

<div class="alert alert-danger" id="div1"></div>

@section Styles{

}

@section Scripts{
    <script>

        //步驟一，建立ajax物件
        var xhr=new XMLHttpRequest();

        //步驟二，對伺服器發出要求
        //api是controller，GetDemo是方法名
        //網址要輸入Home/Ajax，因是在HomeController/View/Home下面Ajax.cshtml，因是在Ajax送出請求，要傳回自己的頁面
        //xhr.open('GET', '/api/GetDemo')
        
       // xhr.open('GET', '/api/getdemo?name=Mary&age=28')

        //改用Url.Content產生路徑↓
        //若指定值↓
        const name = "Jack";
        const age = 25;
        //xhr.open('GET', '@Url.Content("~/api/getdemo")?name=Mary&age=28')
        xhr.open('GET', `@Url.Content("~/api/getdemo")?name=${name}&age=${age}`)


       
        xhr.send();

        //步驟三，接收伺服器回傳的結果(用load事件接收)
        xhr.addEventListener('load' , function(){
        var data=xhr.responseText;

        //步驟四，讀出回傳的結果
        //步驟五，把讀出的結果顯示在網頁上
        document.querySelector('#div1').innerHTML=`<h3>${data}</h3>`
        
        }) 

    </script>
}